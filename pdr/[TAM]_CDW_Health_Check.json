{"data":{"type":"notebooks","attributes":{"name":"[TAM] CDW Health Check ","metadata":{"type":null},"time":{"live_span":"1w"},"cells":[{"id":"m5k04ng4","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"This notebook is prepared by a Datadog Technical Account Manager (TAM) to review current implementations and best practices.\n\nTo learn more or dive deeper, work with your Customer Success Manager to schedule additional time with a Datadog TAM.\n\n"}}},{"id":"3gb4dp69","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# Organizational Footprint\nYour organization footprint is summarized below:"}}},{"id":"svinmqcf","type":"notebook_cells","attributes":{"definition":{"title":"Infra and APM Hosts last monthly","show_legend":true,"type":"timeseries","requests":[{"formulas":[{"style":{"palette":"classic","palette_index":0},"alias":"Infra","formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"avg:datadog.estimated_usage.hosts{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"},{"formulas":[{"alias":"APM","style":{"palette":"classic","palette_index":3},"formula":"query0"}],"queries":[{"data_source":"metrics","name":"query0","query":"avg:datadog.estimated_usage.apm_hosts{*}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"bars"}]},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]}}},{"id":"p3pk35gg","type":"notebook_cells","attributes":{"definition":{"title":"Ingestion Last Month","type":"query_table","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.apm.ingested_spans{*}.as_count()","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_bytes{*}.as_count()","aggregator":"avg"},{"name":"query3","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom.ingested{*}","aggregator":"sum"},{"name":"query4","data_source":"metrics","query":"sum:datadog.estimated_usage.rum.sessions{*}.as_count()","aggregator":"sum"}],"formulas":[{"alias":"Ingested spans","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Ingested logs","formula":"query2"},{"alias":"Ingested Custom Metrics","formula":"query3"},{"alias":"RUM Sessions","formula":"query4"}]}]},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"n53kcrji","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# Infra"}}},{"id":"iq9wtmb5","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## Instrumentation & Tagging  - Best Practices\n\n-  The agent offers more real time telemetry and enables the capability to turn on any integration.\n-   Get the most out of each Datadog monitored agent\n-   Unify monitoring experiences across multi-cloud and hybrid-cloud environments\n-   [Tagging](https://www.datadoghq.com/blog/tagging-best-practices/) infrastructure with `env` creates operational segmentation that allows users to quickly differentiate performance degradation between production and sandbox environments.\n-   Moreover, [Unified Service Tagging](https://docs.datadoghq.com/getting_started/tagging/unified_service_tagging/?tab=kubernetes) describes a consistent nomenclature for hosts, containers, services, and applications across your ecosystem.\n-   Lastly, following a consistent env.value such as `prod`, `sandbox`, `qa`, `test`, or `clone` across tech stacks allow operators to create reusable dashboards, monitors, and deployment templates across different service owners."}}},{"id":"va40b7wg","type":"notebook_cells","attributes":{"definition":{"title":"Agent instrumentation ratio last week","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query2","query":"max:datadog.agent.running{*}","aggregator":"sum"},{"data_source":"metrics","name":"query1","query":"sum:datadog.estimated_usage.hosts{*}","aggregator":"avg"}],"formulas":[{"formula":"query2 / query1 * 100"}],"conditional_formats":[{"comparator":"<","value":80,"palette":"white_on_yellow"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"yaxis":{"include_zero":false},"type":"area"}},"time":{"live_span":"1w"},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"xirt5i8b","type":"notebook_cells","attributes":{"definition":{"title":"Host agents with \"env\" tag, last 30 days","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.agent.running{env:*}","aggregator":"avg"},{"data_source":"metrics","name":"query2","query":"sum:datadog.agent.running{*}","aggregator":"avg"}],"formulas":[{"formula":"query1 / query2 * 100","alias":"% hosts with env tags"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"time":{"start":"2023-07-23T15:48:29.000Z","end":"2023-08-23T15:48:29.000Z","live":true},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"s5nxnk02","type":"notebook_cells","attributes":{"definition":{"title":"Agent \"env\" tag values last 24 hours","requests":[{"response_format":"scalar","formulas":[{"formula":"query1","limit":{"order":"desc"}}],"queries":[{"query":"sum:datadog.agent.running{*} by {env}","data_source":"metrics","name":"query1","aggregator":"avg"}],"style":{"palette":"datadog16"}}],"type":"sunburst","legend":{"type":"automatic"}},"time":{"live_span":"1d"}}},{"id":"z49cwhh4","type":"notebook_cells","attributes":{"definition":{"title":"K8s containers with Env, Service, and Version tags","type":"query_value","requests":[{"conditional_formats":[{"comparator":">=","palette":"black_on_light_green","value":90},{"comparator":">=","palette":"black_on_light_yellow","value":80},{"comparator":"<","palette":"black_on_light_red","value":80}],"formulas":[{"formula":"query1 / query2 * 100"}],"queries":[{"aggregator":"avg","data_source":"metrics","name":"query1","query":"sum:kubernetes.containers.running{env:*,service:*,version:*,!short_image:agent}"},{"aggregator":"avg","data_source":"metrics","name":"query2","query":"sum:kubernetes.containers.running{!short_image:agent}"}],"response_format":"scalar"}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"time":null,"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"kgs9hq6k","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# APM"}}},{"id":"yfwcvvj4","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## Ingesting and Indexing Spans - Best Practices\n- [Index](https://docs.datadoghq.com/tracing/trace_pipeline/ingestion_controls/) a percentage of ingested spans to get detailed analysis of application performance\n- Use this [guide](https://docs.datadoghq.com/tracing/guide/trace_ingestion_volume_control/) to fine tune and monitor span retention\n- Adding the tag `env` and `service` on monitors will ensure that multiple APM pages provide connection to monitors\n- Update APM instrumentation to remove legacy instrumentation"}}},{"id":"k4uqtqjc","type":"notebook_cells","attributes":{"definition":{"title":"Ratio of indexed to ingested spans","show_legend":true,"type":"timeseries","requests":[{"formulas":[{"alias":"Ingested spans","formula":"query1"},{"style":{"palette":"purple","palette_index":3},"alias":"Indexed spans","formula":"query2"},{"alias":"Percentage","formula":"query2 / query1 * 100"}],"queries":[{"data_source":"metrics","name":"query1","query":"sum:datadog.estimated_usage.apm.ingested_spans{*}.as_count()"},{"data_source":"metrics","name":"query2","query":"sum:datadog.estimated_usage.apm.indexed_spans{*}.as_count()"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"area"}]},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]},"graph_size":"m"}},{"id":"tj4ne20b","type":"notebook_cells","attributes":{"definition":{"title":"Service entry spans tagged with Env and Version last month","type":"query_table","requests":[{"aggregator":"avg","queries":[{"data_source":"spans","name":"query2","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":50,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@_top_level:1"}},{"data_source":"spans","name":"query1","indexes":["trace-search"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":50,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"@_top_level:1 env:* @version:*"}}],"response_format":"scalar","formulas":[{"alias":"spans","formula":"query2","limit":{"order":"desc"}},{"alias":"% spans with env and version","conditional_formats":[{"comparator":">","palette":"black_on_light_green","value":95},{"comparator":">","palette":"black_on_light_yellow","value":80},{"comparator":"<=","palette":"black_on_light_red","value":80}],"formula":"query1 / query2 * 100"}]}]},"time":{"start":"2023-08-14T14:24:31.000Z","end":"2023-09-14T14:24:31.000Z","live":true},"split_by":{"keys":[],"tags":[]}}},{"id":"idnp0yiw","type":"notebook_cells","attributes":{"definition":{"title":"Spans from legacy APM instrumentation","type":"query_value","requests":[{"conditional_formats":[{"comparator":">","palette":"red_on_white","value":0}],"formulas":[{"alias":"% contribution to service/env volume","formula":"(1 - (query2 - query1) / query2) * 100"}],"queries":[{"aggregator":"sum","data_source":"metrics","name":"query2","query":"sum:datadog.estimated_usage.apm.ingested_bytes{*}.as_count()"},{"aggregator":"sum","data_source":"metrics","name":"query1","query":"sum:datadog.estimated_usage.apm.ingested_bytes{ingestion_reason:analytics}.as_count()"}],"response_format":"scalar"}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"zvcv3fiw","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"### Example of properly tagged resources\nThe [Service Overview](/services?currentTab=Setup%20Guidance&env=%2A&groupBy=&hostGroup=%2A&lens=Performance&view=list) page highlights how cohesively Datadog resources are attributed to services\n\n![](https://p-qkfgo2.t2.n0.cdn.getcloudapp.com/items/7KuWQy08/302fc0a8-ff47-4b56-938e-40282b773f60.jpg?v=00777f574f8534424a47489b1afb6051)"}}},{"id":"m5xu86f4","type":"notebook_cells","attributes":{"definition":{"title":"Percentage of Logs Correlated with APM Services","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"logs","name":"query1","search":{"query":"trace_id:*"},"indexes":["*"],"compute":{"aggregation":"cardinality","metric":"service"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query2","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"cardinality","metric":"service"},"group_by":[],"storage":"hot"}],"conditional_formats":[{"comparator":">","value":80,"palette":"black_on_light_green"},{"comparator":">=","value":50,"palette":"black_on_light_yellow"},{"comparator":"<","value":50,"palette":"black_on_light_red"}],"formulas":[{"formula":"(query1 / query2) * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"fax691s4","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# Logs"}}},{"id":"oolb0gb5","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## Log Pipeline and Retention  - Best Practices\n\n-  Ensure application logs are properly parsed by [pipelines](https://docs.datadoghq.com/logs/log_configuration/pipelines/?tab=source)\n-  Retain critical error logs to support production outages\n-  Leverage [exclusion filters](https://docs.datadoghq.com/logs/log_configuration/indexes/#exclusion-filters) to eliminate noise from production [retention filters](https://docs.datadoghq.com/logs/log_configuration/indexes/#update-log-retention)\n-  Establish a domain/service convention to standardize log [retention/quotas](https://docs.datadoghq.com/logs/log_configuration/indexes/#set-daily-quota)\n-  Create a default retention filter with daily quota to analyze new patterns "}}},{"id":"mqlf8332","type":"notebook_cells","attributes":{"definition":{"title":"Ingested logs procesesed by pipeline","type":"query_value","requests":[{"conditional_formats":[{"comparator":">=","palette":"black_on_light_green","value":90},{"comparator":">=","palette":"black_on_light_yellow","value":70},{"comparator":"<","palette":"black_on_light_red","value":70}],"formulas":[{"formula":"(query2 - query1) / query2 * 100"}],"queries":[{"data_source":"logs","name":"query2","search":{"query":""},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"},{"data_source":"logs","name":"query1","search":{"query":"datadog.pipelines:false"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"storage":"hot"}],"response_format":"scalar"}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"time":null,"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"ogpi9ibl","type":"notebook_cells","attributes":{"definition":{"title":"Log events indexed last month","type":"query_table","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_events{*} by {datadog_index}.as_count()","aggregator":"avg"},{"name":"query2","data_source":"metrics","query":"sum:datadog.estimated_usage.logs.ingested_events{*} by {datadog_index}.as_count()","aggregator":"avg"}],"formulas":[{"alias":"Current Month","formula":"query1","limit":{"count":500,"order":"desc"}},{"alias":"Prior Month","formula":"month_before(query2)"},{"alias":"Change","formula":"(query1 - month_before(query2)) / month_before(query2) * 100"}]}]},"time":{"start":"2023-07-02T21:13:50.000Z","end":"2023-08-02T21:13:50.000Z","live":true},"split_by":{"keys":[],"tags":[]},"graph_size":"m"}},{"id":"dd8r2big","type":"notebook_cells","attributes":{"definition":{"title":"Indexed logs by status last week","requests":[{"response_format":"scalar","formulas":[{"formula":"query1","limit":{"count":500,"order":"desc"}}],"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"status","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":""},"storage":"hot"}],"style":{"palette":"datadog16"}}],"type":"sunburst","legend":{"type":"automatic"}},"time":{"live_span":"1w"}}},{"id":"ni37um7v","type":"notebook_cells","attributes":{"definition":{"title":"Log events excluded by exclusion filters","type":"query_value","requests":[{"response_format":"scalar","queries":[{"query":"sum:datadog.estimated_usage.logs.ingested_events{datadog_is_excluded:true*}.as_count()","data_source":"metrics","name":"query1","aggregator":"avg"},{"query":"sum:datadog.estimated_usage.logs.ingested_events{*}.as_count()","data_source":"metrics","name":"query2","aggregator":"avg"}],"formulas":[{"formula":"query1 / query2 * 100"}],"conditional_formats":[{"comparator":">","value":30,"palette":"black_on_light_green"},{"comparator":">=","value":1,"palette":"black_on_light_yellow"},{"comparator":"<","value":1,"palette":"black_on_light_red"}]}],"autoscale":false,"custom_unit":"%","precision":2,"timeseries_background":{"type":"area","yaxis":{"include_zero":false}}},"time":{"live_span":"1w"},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"f80zi5da","type":"notebook_cells","attributes":{"definition":{"title":"Logs truncated (due to length) by service last week","type":"toplist","requests":[{"queries":[{"data_source":"logs","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"service","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"message:...TRUNCATED..."},"storage":"hot"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}],"response_format":"scalar"}],"style":{}},"time":{"live_span":"1w"},"split_by":{"keys":[],"tags":[]}}},{"id":"y2r89fbj","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# RUM"}}},{"id":"rhevqlca","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## RUM - Best Practices\n-  [Connecting RUM to APM](https://docs.datadoghq.com/real_user_monitoring/connect_rum_and_traces) allows Datadog to correlate RUM events to backend APM traces, drastically reduce debugging lead time as problematic UI interactions quickly linked to backend errors.\n-  Label sessions with [user](https://docs.datadoghq.com/real_user_monitoring/browser/modifying_data_and_context/?tab=npm#identify-user-session) metadata after user authenticates\n- Ensure teams use consistent attribute convention across applications [instrumentation](https://docs.datadoghq.com/real_user_monitoring/browser/modifying_data_and_context/?tab=npm#identify-user-session) and [custom attributes](https://docs.datadoghq.com/real_user_monitoring/browser/modifying_data_and_context/?tab=npm#enrich-rum-events) allow stakeholders to quickly identify end users and establish trends based on attributes.\\\n - Ensure teams understand how RUM functions and how to [troubleshoot](https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/) initialization."}}},{"id":"7jlbs1xb","type":"notebook_cells","attributes":{"definition":{"title":"RUM sessions by application last month","type":"toplist","requests":[{"response_format":"scalar","queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.rum.sessions{*} by {application.name}.as_count()","aggregator":"sum"}],"formulas":[{"formula":"query1","limit":{"count":10,"order":"desc"}}]}],"style":{}},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]},"graph_size":"m"}},{"id":"ljynsakh","type":"notebook_cells","attributes":{"definition":{"title":"RUM async request events with APM traces last month","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"rum","name":"query1","search":{"query":"@_dd.trace_id:* @type:resource"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]},{"data_source":"rum","name":"query2","search":{"query":"@type:resource"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]}],"conditional_formats":[{"comparator":"<","value":2,"palette":"black_on_light_yellow"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":true,"custom_unit":"%","precision":2,"timeseries_background":{"type":"bars"}},"time":{"start":"2023-08-14T15:10:09.000Z","end":"2023-09-14T15:10:09.000Z","live":true},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"l7nxm9h9","type":"notebook_cells","attributes":{"definition":{"title":"RUM sessions with User ID's last month","type":"query_value","requests":[{"response_format":"scalar","queries":[{"data_source":"rum","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[],"search":{"query":"@usr.id:* @type:session"}},{"data_source":"rum","name":"query2","search":{"query":"@type:session"},"indexes":["*"],"compute":{"aggregation":"count"},"group_by":[]}],"conditional_formats":[{"comparator":">","value":75,"palette":"black_on_light_green"},{"comparator":"<=","value":75,"palette":"black_on_light_yellow"}],"formulas":[{"formula":"query1 / query2 * 100"}]}],"autoscale":false,"custom_unit":"%","precision":2,"timeseries_background":{"type":"bars"}},"time":{"start":"2023-08-14T15:10:09.000Z","end":"2023-09-14T15:10:09.000Z","live":true},"split_by":{"keys":[],"tags":[]},"graph_size":"xs"}},{"id":"cw7l8qmq","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# Custom Metrics"}}},{"id":"fgnasiul","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## Custom Metrics - Best Practices\n- Metrics with a high cardinality compared to the other often highlights a misconfiguration.\n- Use Datadog's supported integrations instead of OpenMetrics or Prometheus metrics scraping to avoid unnecessary billing\n- Leverage [Metrics without Limits](https://docs.datadoghq.com/metrics/metrics-without-limits/) to decouple time series ingestion from indexation - allowing better control on what metrics tags are queryable and billable.\n- Use [Billing Summary](/billing/usage?data_source=billable&summary_month=2023-07&trends_start_date=2023-07-01&trends_time_frame=monthly]) to review custom metrics costs\n- Add monitors and dashboards to track [estimated usage metrics](https://docs.datadoghq.com/account_management/billing/usage_metrics/#overview) for anomalies in usage."}}},{"id":"jr4sdm6o","type":"notebook_cells","attributes":{"definition":{"title":"Top custom metrics cardinality by name last two months","type":"query_table","requests":[{"queries":[{"aggregator":"avg","data_source":"metrics","name":"query1","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}"},{"aggregator":"avg","data_source":"metrics","name":"query3","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*}"},{"aggregator":"avg","data_source":"metrics","name":"query4","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}"},{"aggregator":"avg","data_source":"metrics","name":"query2","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*}"}],"response_format":"scalar","formulas":[{"alias":"Metric Volume","formula":"query1"},{"alias":"% total volume","conditional_formats":[{"comparator":">","palette":"black_on_light_red","value":15},{"comparator":">","palette":"black_on_light_yellow","value":8}],"formula":"query1 / query3 * 100","limit":{"count":500,"order":"desc"}},{"alias":"% prev month","formula":"month_before(query4) / month_before(query2) * 100"}]}]},"time":{"start":"2023-06-27T14:43:09.000Z","end":"2023-07-28T14:43:09.000Z","live":true},"split_by":{"keys":[],"tags":[]}}},{"id":"p2g1f4ii","type":"notebook_cells","attributes":{"definition":{"title":"Custom metrics index rate by metric name","show_legend":true,"type":"timeseries","requests":[{"formulas":[{"alias":"estimated usage","formula":"query1"}],"queries":[{"name":"query1","data_source":"metrics","query":"sum:datadog.estimated_usage.metrics.custom.by_metric{*} by {metric_name}"}],"response_format":"timeseries","style":{"palette":"dog_classic","line_type":"solid","line_width":"normal"},"display_type":"line"}]},"time":{"live_span":"1mo"},"split_by":{"keys":[],"tags":[]}}},{"id":"hwco5zmo","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# Monitors"}}},{"id":"2gycu265","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## Monitoring - Best Practices\n- Leverage [Dynamic Handles](https://docs.datadoghq.com/monitors/notify/variables/?tab=is_alert#dynamic-handles) to alert appropriate teams\n- Use SOP/runbook [URL's]((https://docs.datadoghq.com/monitors/notify/variables/?tab=is_alert#dynamic-links)) in alert message to streamline actions for alert recipients.\n- Consider using [Alert Grouping with Multi-Alert](https://docs.datadoghq.com/monitors/configuration/?tab=thresholdalert#alert-grouping) to segment recipients monitoring the same metric. This allows a single monitor to potentially replace dozens of similar monitors.\n- [Tagging monitors](/monitors/manage?q=env%3A%2A%20service%3A%2A) with `env` and `service` ensures that monitors are correlated with the relevant APM services. \n- Add governance for monitor tagging with [monitor tag policies](https://docs.datadoghq.com/monitors/settings/)\n- Reduce noise floor by removing unnecessary or deprecated monitors.\n- Monitors [muted for 15+ days](/monitors/manage?q=muted_elapsed%3A15d) should be reviewed for sanitization or removal."}}},{"id":"pueh41u6","type":"notebook_cells","attributes":{"definition":{"title":"Monitors with alerts last week","type":"query_table","requests":[{"aggregator":"avg","queries":[{"data_source":"events","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@monitor_id","limit":30,"sort":{"order":"desc","aggregation":"count"}},{"facet":"@evt.name","limit":30,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert status:error"}}],"response_format":"scalar","formulas":[{"alias":"alerts","conditional_formats":[{"comparator":">","palette":"black_on_light_yellow","value":15}],"formula":"query1","limit":{"count":900,"order":"desc"}}]}],"custom_links":[{"label":"View related monitor: {{@monitor_id.value}}","link":"/monitors/{{@monitor_id.value}}"}]},"time":{"live_span":"1w"},"split_by":{"keys":[],"tags":[]}}},{"id":"ebs50kmr","type":"notebook_cells","attributes":{"definition":{"title":"Alerts by notification recipient","type":"query_table","requests":[{"aggregator":"avg","queries":[{"data_source":"events","name":"query1","indexes":["*"],"compute":{"aggregation":"count"},"group_by":[{"facet":"@monitor_notifications","limit":10,"sort":{"order":"desc","aggregation":"count"}}],"search":{"query":"source:alert status:error"}}],"response_format":"scalar","formulas":[{"alias":"alerts","formula":"query1","limit":{"order":"desc"}}]}]},"time":{"live_span":"1w"},"split_by":{"keys":[],"tags":[]}}},{"id":"dgotyben","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"# Dashboards"}}},{"id":"ugdqrjbj","type":"notebook_cells","attributes":{"definition":{"type":"markdown","text":"## Dashboards - Best Practices\n- Increase dashboard widget density and reuse with [template variables](https://docs.datadoghq.com/dashboards/template_variables/)\n- Add addition event context to time series widgets with [event overlays](https://docs.datadoghq.com/dashboards/change_overlays/)\n- Leverage pre-built dashboards installed by [integrations](/dashboard/lists/preset/3)\n- Work with your CSM/TAM to get a report of unused dashboards\n- Leverage the Datadog [Workshop](https://learn.datadoghq.com/courses/building-better-dashboards) for self-guided onboarding"}}}],"template_variables":[{"name":"org_id","prefix":"org_id","available_values":[],"default":"246616"}]}}}